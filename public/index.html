<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Calais Tagger</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/water.css@2/out/water.css">
  <link rel="stylesheet" href="styles.css">
  <!-- Add the following lines inside the <head> tag -->
<script>
    async function submitData() {
      const jsonInput = document.getElementById("jsonInput");
      const valueToAnalyse = document.getElementById("valueToAnalyse");
      const apiToken = document.getElementById("apiToken");
      const jsonOutput = document.getElementById("jsonOutput");
  
      const response = await fetch("/tagger", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
        },
        body: JSON.stringify({
          data: JSON.parse(jsonInput.value),
          valueToAnalyse: valueToAnalyse.value,
          apiToken: apiToken.value,
        }),
      });
  
      if (response.ok) {
        const taggedData = await response.json();
        jsonOutput.value = JSON.stringify(taggedData, null, 2);
      } else {
        jsonOutput.value = "Error tagging data";
      }
    }
  </script>
</head>
<body>
  <div class="container">
      <h1>Tagging App</h1>
    <p>
        This application is a simple tagging app that helps you extract relevant tags from your input data using the Open Calais API. You can use it to find information about persons, companies, organizations, social tags, and topics present in your data.
    </p>
    <p>
        To use the app, you need to send a POST request to the <code>/tagger</code> endpoint with the following JSON data:
    </p>
    <pre>
{
  "data": [...],           // Array of objects to analyze
  "valueToAnalyse": "...", // Property of the object to be analyzed
  "apiToken": "..."        // Your Open Calais API token
}
    </pre>
    <p>
        The app will process your data and return an array of objects with an additional <code>tags</code> property containing the extracted tags.
    </p>
    <p>
        Note: Due to API limitations, you may need to wait between requests to avoid errors. Please adjust your request rate accordingly.
    </p>
    <label for="jsonInput">Paste your JSON:</label>
    <textarea id="jsonInput" rows="10"></textarea>
    <label for="valueToAnalyse">Value to Analyse:</label>
    <input type="text" id="valueToAnalyse" />
    <label for="apiToken">API Token:</label>
    <input type="text" id="apiToken" />
    <button id="submitBtn" onclick="submitData()">Submit</button>
    <label for="jsonOutput">Tagged JSON:</label>
    <textarea id="jsonOutput" rows="10" readonly></textarea>
  </div>
  <script src="tagger.js"></script>
</body>
</html>
